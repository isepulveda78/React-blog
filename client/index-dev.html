<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mr. S Teaches - Development Mode</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f9fa;
      }
      .min-vh-50 {
        min-height: 50vh;
      }
      .bg-gradient-to-br {
        background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      }
      .text-primary {
        color: #0d6efd !important;
      }
      .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
      }
      .btn-primary:hover {
        background-color: #0b5ed7;
        border-color: #0a58ca;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    test
    <!-- Enhanced Hot Reload System -->
    <script>
      console.log('üî• Enhanced hot reload system starting...');
      
      // Create visual indicator - ENHANCED VERSION
      const indicator = document.createElement('div');
      indicator.innerHTML = 'üî• DEV MODE - HOT RELOAD ACTIVE';
      indicator.style.cssText = 'position: fixed; top: 10px; right: 10px; background: #28a745; color: white; padding: 10px 15px; border-radius: 6px; font-size: 14px; font-weight: bold; z-index: 10000; font-family: Arial, sans-serif; box-shadow: 0 4px 12px rgba(0,0,0,0.4); border: 2px solid #fff;';
      document.body.appendChild(indicator);
      
      // Also add title indicator
      document.title = 'üî• DEV MODE - ' + document.title;
      
      let lastModified = null;
      let lastEtag = null;
      let checkCount = 0;
      let isReloading = false;
      
      function showReloadNotification(message, color) {
        indicator.innerHTML = message;
        indicator.style.background = color;
      }
      
      function checkForChanges() {
        if (isReloading) return;
        
        checkCount++;
        console.log('üîç Hot reload check #' + checkCount);
        
        const timestamp = Date.now();
        
        fetch('/api/hot-reload/check?bust=' + timestamp, { 
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'Cache-Control': 'no-cache, no-store, must-revalidate',
            'Pragma': 'no-cache'
          }
        })
          .then(function(response) {
            return response.json();
          })
          .then(function(data) {
            console.log('Hot reload check result:', data);
            
            // Initialize on first check
            if (data.initialized) {
              console.log('‚úÖ Hot reload initialized');
              return;
            }
            
            // Check for changes
            if (data.changed) {
              console.log('üîÑ CHANGE DETECTED! Reloading page...');
              console.log('Change count:', data.changeCount);
              
              isReloading = true;
              showReloadNotification('üîÑ RELOADING...', '#007bff');
              
              setTimeout(function() {
                window.location.reload(true);
              }, 500);
            }
          })
          .catch(function(error) {
            console.log('Hot reload check failed:', error);
          });
      }
      
      // Start checking for changes
      const interval = setInterval(checkForChanges, 1000);
      
      // Initial check after DOM loads
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', checkForChanges);
      } else {
        checkForChanges();
      }
      
      // Manual reload shortcut
      document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'R') {
          e.preventDefault();
          console.log('üîÑ Manual reload triggered');
          showReloadNotification('üîÑ MANUAL RELOAD', '#dc3545');
          clearInterval(interval);
          setTimeout(function() { window.location.reload(true); }, 300);
        }
      });
      
      console.log('‚úÖ Enhanced hot reload system ready');
      console.log('üìù Manual reload: Ctrl+Shift+R (or Cmd+Shift+R on Mac)');
    </script>
    
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>